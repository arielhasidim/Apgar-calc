import{r as c,j as e,C as E,a as M,b as F,B as l,S as H,P as R,c as G,d as U,A as $,e as I,f as L,g as O,D as P}from"./index-Bc1e1RUE.js";const D=()=>{const[d,m]=c.useState(0),[r,x]=c.useState(!1),[i,g]=c.useState({appearance:0,pulse:0,grimace:0,activity:0,respiration:0}),[n,N]=c.useState([]),[b,h]=c.useState(!1),[v,A]=c.useState(""),w={appearance:[{score:0,desc:"כחול או חיוור"},{score:1,desc:"גוף ורוד, גפיים כחולות"},{score:2,desc:"ורוד לחלוטין"}],pulse:[{score:0,desc:"ללא דופק"},{score:1,desc:"פחות מ-100 פעימות לדקה"},{score:2,desc:"מעל 100 פעימות לדקה"}],grimace:[{score:0,desc:"אין תגובה לגירוי"},{score:1,desc:"עיוות פנים"},{score:2,desc:"שיעול או התעטשות"}],activity:[{score:0,desc:"רפוי"},{score:1,desc:"כיפוף מועט של גפיים"},{score:2,desc:"תנועה פעילה"}],respiration:[{score:0,desc:"לא נושם"},{score:1,desc:"חלשה או לא סדירה"},{score:2,desc:"טובה, בוכה"}]},S={appearance:"צבע",pulse:"דופק",grimace:"רפלקסים",activity:"טונוס שרירים",respiration:"נשימה"},C=()=>{new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/fPgzEGJHfH9OaVQggUXrTp66lwFw1Fn937x3gdBCx8zPTblT4HGWu/8OihUw0PVarp97hxHQY6ldn50YYyBSV6yfbpmEIHFGG16u2tdBgNSKHf+8p7HwQtf873IBg=").play()},u=c.useCallback(s=>{[1,5,10,15,20].includes(s)&&(A(`${s} דקות חלפו - האם ברצונך לשמור את הציון?`),h(!0),C())},[]);c.useEffect(()=>{let s;return r&&(s=setInterval(()=>{m(a=>{const t=a+1;return u(Math.floor(t/60)),t})},1e3)),()=>clearInterval(s)},[r,u]);const j=()=>Object.values(i).reduce((s,a)=>s+a,0),y=s=>{const a=Math.floor(s/60),t=s%60;return`${a}:${t.toString().padStart(2,"0")}`},B=(s,a)=>{g(t=>({...t,[s]:a}))},p=()=>{const s={timeMinutes:Math.floor(d/60),total:j(),scores:{...i}};N(a=>[...a,s]),h(!1)},k=()=>{const s=n.map(a=>`זמן: ${a.timeMinutes} דקות, ציון כולל: ${a.total}/10`).join(`
`);navigator.clipboard.writeText(s)},T=()=>{const s=n.map(f=>`זמן: ${f.timeMinutes} דקות, ציון כולל: ${f.total}/10`).join(`
`),a=new Blob([s],{type:"text/plain"}),t=URL.createObjectURL(a),o=document.createElement("a");o.href=t,o.download="apgar-summary.txt",o.click(),URL.revokeObjectURL(t)};return e.jsxs(E,{className:"w-full max-w-2xl mx-auto bg-white",children:[e.jsxs(M,{className:"text-center",children:[e.jsx(F,{className:"text-2xl",children:"מחשבון ציון אפגר"}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mt-4",children:[e.jsx("div",{className:"text-xl font-mono",children:y(d)}),e.jsx(l,{onClick:()=>x(!r),variant:"outline",size:"icon",children:r?e.jsx(H,{className:"h-4 w-4"}):e.jsx(R,{className:"h-4 w-4"})}),e.jsx(l,{onClick:()=>{m(0),x(!1)},variant:"outline",size:"icon",children:e.jsx(G,{className:"h-4 w-4"})})]})]}),e.jsxs(U,{className:"space-y-6",children:[b&&e.jsxs($,{className:"mb-4",children:[e.jsx(I,{children:v}),e.jsx(l,{onClick:p,className:"mt-2",children:"שמור ציון"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(w).map(([s,a])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:S[s]}),e.jsx("div",{className:"flex flex-col gap-2",children:a.map(t=>e.jsxs("button",{onClick:()=>B(s,t.score),className:`p-2 rounded text-sm ${i[s]===t.score?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:[t.desc,e.jsx("div",{className:"font-bold mt-1",children:t.score})]},t.score))})]},s))}),e.jsxs("div",{className:"mt-6 p-4 rounded bg-gray-50 text-center",children:[e.jsxs("div",{className:"text-xl font-bold",children:["ציון סופי: ",j(),"/10"]}),e.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[e.jsxs(l,{onClick:p,className:"flex gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"שמור ציון"]}),e.jsxs(l,{onClick:k,variant:"outline",className:"flex gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"העתק סיכום"]}),e.jsxs(l,{onClick:T,variant:"outline",className:"flex gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),"הורד סיכום"]})]})]}),n.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"היסטוריית ציונים"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-right",children:"זמן"}),e.jsx("th",{className:"text-right",children:"ציון"})]})}),e.jsx("tbody",{children:n.map((s,a)=>e.jsxs("tr",{className:"border-t",children:[e.jsxs("td",{className:"py-2",children:[s.timeMinutes," דקות"]}),e.jsxs("td",{className:"py-2",children:[s.total,"/10"]})]},a))})]})})]})]})]})};export{D as default};
